<!DOCTYPE html>
<html>
<head>
  <title>JBJ</title>

  <!-- CSS-->
  <link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="assets/css/bootstrap-theme.min.css"/>
  <link rel="stylesheet" href="assets/css/style.css"/>

  <!-- JAVASCRIPT -->
  <script src="assets/js/bundle.js" type="text/javascript"></script>
</head>
<body>

    <h1 class="row">JBJ - TESTER</h1>
    <h2 class="row"> A simple ... </h2>

    <section class="container">
      <div class="textareaSection">
          <div class="col-lg-4">
            <label for="input">CONTENT :</label>
            <textarea id="input"  cols="30" rows="10">{"test":1}</textarea>
          </div>
          <div class="col-lg-4">
            <label for="stylesheet">VARIABLE :</label>
            <textarea id="stylesheet"  cols="30" rows="10">{"get":"test"}</textarea>
          </div>
          <div class="col-lg-4">
            <label for="output">RESULT :</label>
            <textarea id="output"   cols="30" rows="10"></textarea>
          </div>
      </div>
      <div class="row" style="text-align: center; margin-top: 50px; ">
          <button class="tryButton">TRY IT!</button>
      </div>

    </section>

  <script type="text/javascript">
var JBJ = require('jbj');
var output = document.getElementById('output');

var getValue = function getValue(id) {
  var value = {};
  try {
    value = JSON.parse(document.getElementById(id).value);
    return value;
  }
  catch(e) {
    console.error(e);
    value.err = e;
    output.value = "Error in " + id + ":\n" + e;
    return value;
  }
};

var applyStylesheet = function applyStylesheet() {
  var input = getValue('input');
  if (input.err) return;
  var stylesheet = getValue('stylesheet');
  if (stylesheet.err) return;
  JBJ.render(stylesheet,input, function afterRender(err, out) {
    if (err) {
      console.error(err);
      output.value = err;
      return;
    }
    output.value = out;
  });
};

var button = document.getElementsByTagName('button')[0];
button.addEventListener('click', applyStylesheet);

  </script>
</body>
</html>
