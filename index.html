<!DOCTYPE html>
<html>
<head>
  <title>JBJ - Playground</title>
  <meta name="description" content="Json By Json - A new way to transform JSON object with a JSON stylesheet. It's like XSL/XML but only with JSON." />


  <!-- CSS-->
  <link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="assets/css/bootstrap-theme.min.css"/>
  <link rel="stylesheet" href="assets/css/jsoneditor.min.css">
  <link rel="stylesheet" href="assets/css/style.css"/>

  <!-- JAVASCRIPT -->
  <script src="assets/js/jsoneditor.min.js"></script>
  <script src="assets/js/ace/ace.js"></script>
  <script src="assets/js/ace/theme-jsoneditor.js"></script>
  <script src="assets/js/bundle.js" type="text/javascript"></script>
</head>
<body>
    <a href="https://github.com/castorjs/node-jbj"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

    <aside class="asideInfos">
      <h2>API</h2>
      <section id="examplesSection">
        <h3 id="examplesButton">Examples</h3>
        <div id="examples" style="display:none">
          <input id="search-example" type="text" placeholder="Search...">
          <ul id="examples-list">         
          </ul>
        </div>
      </section>
      <section id="actionsSection">
          <h3 id="actionsButton" style="background : #A34EC6">Actions</h3>
          <div id="actions" style="">
            <input id="search-action" type="text" placeholder="Search...">
            <ul style="" id="actions-list">
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#append-something--something-something-">append</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#array2object">array2object</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#assert">assert</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#capitalize">capitalize</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#cast">cast</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#coalesce">coalesce</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#compute">compute</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#csv">csv</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#debug">debug</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#deduplicate">deduplicate</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#deduplicate">dedupe</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#deduplicate">unique</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#default">default</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#dividedby-value--value-value-">dividedBy</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#dividedby-value--value-value-">divided_by</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#downcase">downcase</a>  </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#extend">extend</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#extend">extendWith</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#first">first</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#flatten">flatten</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#foreach">foreach</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#get">get</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#get">find</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#get">path</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#getindex">getindex</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#getindex">getIndex</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#getindexvar">getindexvar</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#getindexvar">getIndexVar</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#getproperty">getproperty</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#getproperty">getProperty</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#getpropertyvar">getpropertyvar</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#getpropertyvar">getPropertyVar</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#join-string---">join</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#join-string---">glue</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#json">json</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#json">toJSON</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#last">last</a>  </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#mapping">mapping</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#mappingVar">mappingVar</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#mappingVar">combine</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#mask">mask</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#max">max</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#min">min</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#minus-value--value-value-">minus</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#parseCSV">parseCSV</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#parseCSV">fromCSV</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#parseCSV">uncsv</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#parseJSON">parseJSON</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#parseJSON">fromJSON</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#parseJSON">unjson</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#parseXML">parseXML</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#plus-value--value-value-">plus</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#prepend-something--something-something-">prepend</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#remove">remove</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#remove">del</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#replace-pattern-substitution--pattern">replace</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#required">required</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#reverse">reverse</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#select">select</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#set">set</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#shift-n--n-n-">shift</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#size">size</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#size">length</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#sort">sort</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#sortby-prop--prop-prop-">sortBy</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#sortby-prop--prop-prop-">sort_by</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#substring">substring</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#substring">substr</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#sum">sum</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#sum">total</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#template">template</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#times-value--value-value-">times</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#trim">trim</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#truncate-length--length-length-">truncate</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#truncatewords-n--n-n-">truncateWords</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#truncatewords-n--n-n-">truncate_words</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#upcase">upcase</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#xml">xml</a> </li>
              <li class="action"> <a target="_blank" href="https://github.com/castorjs/node-jbj#zip">zip</a> </li>
            </ul>
          </div>
        </section>
    </aside>
    <section class="container-fluid content">
      <h1 class="row">JBJ - Playground</h1>
      <h2 class="row">Json By Json - A new way to transform JSON object with a JSON stylesheet. It's like XSL/XML but only with JSON. </h2>

      <div class="row">
          <div class="col-xs-12 col-sm-4">
            <label for="input">INPUT :</label>
            <div id="input"></div>
            <br/>
            <label for="inputurl">URL:</label>
            <input id="inputurl" type="url" placeholder="Url of json data">
          </div>
          <div class="col-xs-12 col-sm-4">
            <label for="stylesheet">STYLESHEET :</label>
            <div id="stylesheet"></div>
          </div>
          <div class="col-xs-12 col-sm-4">
            <label for="output">RESULT :</label>
            <div id="output"></div>
          </div>
      </div>
      <div class="text-center row" style="margin: 50px; ">
          <button class="tryButton">TRY IT!</button>
          <button class="optionsButton">SHOW API</button>
      </div>
    </section>

    <script type="text/javascript">
var JBJ     = require('jbj');
var reqwest = require('reqwest');

var input       = document.getElementById('input'),
    stylesheet  = document.getElementById('stylesheet'),
    output      = document.getElementById('output');

// JsonEditor Options
var jseOptions = {
  mode: "code"
};

var inputEditor       = new JSONEditor(input,jseOptions);
    stylesheetEditor  = new JSONEditor(stylesheet,jseOptions);
    outputEditor      = new JSONEditor(output,jseOptions)

// Json Start example
var inputJson      = {"test": "1"},
    stylesheetJson = {"get":"test"},
    outputJson     = "Click on try to view result";

inputEditor.set(inputJson);
stylesheetEditor.set(stylesheetJson);
outputEditor.set(outputJson);

var getValue = function getValue(element) {
  var value = {};
  try {
    value = element.get();
    return value;
  }
  catch(e) {
    if (element.get() === 'undefined') {
      return undefined;
    }
    console.error(e);
    value.err = e;
    outputEditor.set("Error in " + element + ":\n" + e);
    return value;
  }
};

var applyStylesheet = function applyStylesheet() {
  var input = getValue(inputEditor);
  if (input && input.err) return;
  var stylesheet = getValue(stylesheetEditor);
  if (stylesheet.err) return;
  var out = JBJ.renderSync(stylesheet, input);
  if (out instanceof Error) {
    console.error(out);
    out = "Error: " + out.message;
  }
  outputEditor.set(out);
};

var searchExample = function searchExample(e) {
  var toFind     = e.target.value;
  var len        = toFind.length;
  var examples   = document.getElementById('examples-list');
  var examplesNb = examples.children.length;
  for (var i=0; i < examplesNb; i++) {
    var li = examples.children[i];
    var text = li.textContent.trim();
    if (text.slice(0, len) === toFind) {
      li.setAttribute('style', 'display:normal');
    }
    else {
      li.setAttribute('style', 'display:none');
    }
  }
};

var searchAction = function SearchAction(e) {
  console.log(e);
  console.log(e.target.value);
  var toFind = e.target.value;
  var len    = toFind.length;
  var actionsList = document.getElementById('actions-list');
  var actionsNb = actionsList.children.length;
  for (var i=0; i < actionsNb; i++) {
    var li = actionsList.children[i];
    var text = li.textContent.trim();
    if (text.slice(0, len) === toFind) {
      li.setAttribute('style', 'display:normal');
    }
    else {
      li.setAttribute('style', 'display:none');
    }
  }
};

var button = document.querySelector('.tryButton');
button.addEventListener('click', applyStylesheet);

var search_action = document.getElementById('search-action');
search_action.addEventListener('keyup', searchAction);

var search_example = document.getElementById('search-example');
search_example.addEventListener('keyup', searchExample);

var examples       = document.getElementById('examples'),
    examplesButton = document.getElementById('examplesButton'),
    actions        = document.getElementById('actions'),
    actionsButton  = document.getElementById('actionsButton'),
    optionsButton   = document.getElementsByClassName('optionsButton')[0],
    asideInfos     = document.getElementsByClassName('asideInfos')[0],
    inputURL       = document.getElementById('inputurl'),
    content        = document.getElementsByClassName('content')[0];

optionsButton.addEventListener('click' , function (e) {
  if(asideInfos.style.left !== "0px"){
    optionsButton.innerHTML = "HIDE API";
    asideInfos.style.left = "0px";
    content.style.left = "240px";
    content.style.width = "calc(100vw - 240px)";
  }
  else{
    optionsButton.innerHTML = "SHOW API";
    asideInfos.style.left = "-240px";
    content.style.left = "0";
    content.style.width = "100vw";
  }
});

examplesButton.addEventListener('click' , function (e) {
  if(document.getElementById('examples').style.display == "none"){
    document.getElementById('examples').style.cssText = "display: block;";
    document.getElementById('actions').style.cssText = "display: none;";
    examplesButton.style.cssText = "background: #A34EC6";
    actionsButton.style.removeProperty("background");
  }
  else{
    document.getElementById('examples').style.cssText = "display: none;";
    examplesButton.style.removeProperty("background");
  }
});

actionsButton.addEventListener('click' , function (e) {
  if(document.getElementById('actions').style.display == "none"){
    document.getElementById('actions').style.cssText = "display: block;";
    document.getElementById('examples').style.cssText = "display: none;";
    actionsButton.style.cssText = "background: #A34EC6";
    examplesButton.style.removeProperty("background");
  }
  else{
    document.getElementById('actions').style.cssText = "display: none;";
    actionsButton.style.removeProperty("background");
  }
});

/**
 * Request the URL content and put it in inputEditor.
 * @param  {URL} url URL of the JSON to load
 */
var url2input = function (url) {
  reqwest({url: url,
    crossOrigin: true,
    type: 'json',
    success: function (content) {
      inputEditor.set(content);
    }
  });
};

inputURL.addEventListener('keyup', function (e) {
  if (e.keyIdentifier === 'Enter' || e.code === 'Enter') {
    window.location.search = '?input=' + inputURL.value;
  }
});

var url = window.location.search.slice("?input=".length);
if (url.slice(0,4) === 'http') {
  inputURL.value = url;
  url2input(url);
};

    </script>
    <script src="assets/js/examples.js" type="text/javascript"></script>
  </body>
</html>


